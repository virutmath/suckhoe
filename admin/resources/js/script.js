function loadModalRecorder(e){var t=$("#iframe-recorder"),a=$("#modal-recorder");switch(a.removeClass("hidden"),e){case 1:t.attr("src","/admin/resources/templates/loadRecorder.html");break;case 2:t.attr("src","/admin/resources/templates/loadRecorderWoman.html")}}function closeModalRecorder(){var e=$("#iframe-recorder"),t=$("#modal-recorder");e.attr("src",""),t.addClass("hidden")}function loadpage(e){$("#table-listing").load(e.href)}function check_edit(e){document.getElementById(e).checked=!0}function addRow(e){var t=$(e).closest(".row_insert").find(">.col-sm-4"),a=t.find(".item_template").clone().removeClass("hidden item_template");t.append(a)}function removeRow(e){var t=$(e).closest(".row_insert").find(".col-sm-4");t.find(".row_insert_item").length<=1||$(e).closest(".row_insert_item").remove()}function trim(e){if(isNaN(e))return e;for(;" "==e.substring(0,1);)e=e.substring(1,e.length);for(;" "==e.substring(e.length-1,e.length);)e=e.substring(0,e.length-1);return e}function isBlank(e){return""==trim(e)?!0:!1}function validForm(e){e=$.parseJSON(e);for(i in e.elements){var t=e.elements[i];if(isBlank($("#"+t.id).val()))return t.msg&&alert(t.msg),$("#"+t.id).css({border:"1px solid #FF0000"}).focus(),submit_available=!1,!1;$("#"+t.id).css("border","1px solid #CCC"),submit_available=!0}form_name=e.form_name,$('[data-role="auto-numeric"]').each(function(){var e=$("#"+$(this).data("target-value"));e.length&&e.val($(this).autoNumeric("get"))}),1==submit_available&&document.form_name.submit()}function Grid(){this.tr="#tr_",this.input_active="#active_field_"}function showPopup(e){var t=632,a=400,i=(screen.width-t)/2,r=(screen.height-a)/2,n="width="+t+", height="+a;n+=", top="+r+", left="+i,n+=", location=1",n+=", menubar=no",n+=", resizable=no",n+=", scrollbars=no",n+=", status=no",n+=", toolbar=no";var o=window.open(e,"windowname5",n);o&&o.focus()}function ChangeTypeProduct(e){$.ajax({type:"post",url:"../products/ajax.php",data:{id:e,action:"load_type_product",type:$("#pro_type").val()},dataType:"json",success:function(e){1==e.code&&(window.location.href=e.url)}})}function number_format(e,t,a,i){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var r=isFinite(+e)?+e:0,n=isFinite(+t)?Math.abs(t):0,o="undefined"==typeof i?",":i,l="undefined"==typeof a?".":a,s="",c=function(e,t){var a=Math.pow(10,t);return""+Math.round(e*a)/a};return s=(n?c(r,n):""+Math.round(r)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(s[1]||"").length<n&&(s[1]=s[1]||"",s[1]+=new Array(n-s[1].length+1).join("0")),s.join(l)}function error_show(e,t){t=$(t),t.html()||(t=t.closest("div")),$.isArray(e)||(e=[e]),number_error=e.length;for(var a=0;a<number_error;a++)t.append('<div class="alert alert-danger alert-dismissable"><button class="close" href="#" data-dismiss="alert" aria-hidden="true">&times;</button>'+e[a]+"</div>");return t}function check_url(e){var t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return t.test(e)}var submit_available=!0;Grid.prototype.checkall=function(){"checked"==$("#check_all").attr("checked")?$("#table-listing input.check").attr("checked","checked"):$("#table-listing input.check").removeAttr("checked")},Grid.prototype.delete_one=function(e){if(confirm("Bạn muốn xóa bản ghi này ?")){var t=this.tr+e;$(t).remove(),$.ajax({type:"post",url:"delete.php",data:{record_id:e},success:function(e){alert(e)}})}return!1},Grid.prototype.delete_all=function(e){if(console.log(e),confirm("Bạn muốn xóa các bản ghi đã chọn ?")){var t="0",a=!1;for(i=1;i<=e;i++)if(1==document.getElementById("record_"+i).checked){id=document.getElementById("record_"+i).value,t+=","+id;var r=this.tr+id;$(r).remove(),a=!0}a===!0?$.ajax({type:"POST",url:"delete.php",data:"record_id="+t,success:function(e){""!=e&&alert(e)}}):alert("Vui lòng chọn ít nhất 1 bản ghi!")}return!1},Grid.prototype.update_active=function(e,t){var a="#"+e+"_"+t,i=$(a).closest("td");return $.ajax({type:"post",data:{id:t,field:e},url:"active.php",success:function(e){i.html(e)},beforeSend:function(){i.html('<img src="../../resources/img/loading.gif"/>')}}),!1};var UploaderScript=UploaderScript||{};UploaderScript.config={url:"../../resources/php/upload.php",file_ext:"jpg,gif,png,jpeg,bmp",browse_button:"",image_wrapper:"",loading:"",error_wrapper:"",max_file_size:"10mb",file_name:""},UploaderScript.init=function(e,t){if($.extend(UploaderScript.config,e),!UploaderScript.config.browse_button||!$("#"+UploaderScript.config.browse_button).length)return console.log("Error : Khong tim thay browse_button"),!1;var a=new plupload.Uploader({runtimes:"html5,flash,html4",browse_button:UploaderScript.config.browse_button,max_file_size:UploaderScript.config.max_file_size,url:UploaderScript.config.url,flash_swf_url:"plupload/js/plupload.flash.swf",silverlight_xap_url:"plupload/js/plupload.silverlight.xap",filters:[{title:"Image files",extensions:UploaderScript.config.file_ext}]});a.init(),a.bind("FilesAdded",function(){a.start()}),a.bind("UploadProgress",function(e,t){UploaderScript.config.loading&&$("#"+UploaderScript.config.loading).html(t.percent+"%")}),a.bind("FileUploaded",function(e,a,i){if(200==i.status){var r=i.response;r=JSON.parse(r),filename=r.result.filename,filepath=r.result.filepath,$("#"+UploaderScript.config.image_wrapper).attr("src",filepath),UploaderScript.config.file_name=filename,t()}})};var NewsJS=NewsJS||{};NewsJS.search_relate=function(){data=$("#search_relate").val(),$.ajax({type:"post",url:"../news/ajax.php",data:{keyword:data,action:"search_relate"},success:function(e){$("#relate_result").html(e)}})},NewsJS.add_relate=function(){var e=[];if($(".new_relate_result").each(function(){"checked"==$(this).attr("checked")&&(dataRN={value:$(this).val(),title:$(this).attr("title")},e.push(dataRN))}),e.length){var t='<div class="relate_element">',a=!0;for(i in e)if(!$("#new_relate_list_"+e[i].value).length){var r="";r+='<label class="checkbox"><input type="checkbox" class="checkbox" checked="checked" name="new_relate_list[]" value="'+e[i].value+'" id="new_relate_list_'+e[i].value+'"/>',r+=e[i].title,r+='<span style="margin-left:5px;padding:5px;color:red;font-weight:bold;font-size:14px;cursor:pointer;" onclick="NewsJS.del_relate(this);return false;">&times;</span></label>',t+=r,a=!1}t+="</div>",a||$("#news_relate_after_search").append(t)}},NewsJS.del_relate=function(e){relateDiv=$(e).closest(".relate_element"),$(e).closest("label").remove(),relateDiv.find("label").length||relateDiv.remove()};var ProductJS=ProductJS||{};ProductJS.uploadSlide=function(){var e=$("#add-item"),t=$(".slides"),a=new plupload.Uploader({runtimes:"html5,flash,html4",browse_button:"browser-file",max_file_size:"10mb",url:"../../resources/php/upload.php",flash_swf_url:"plupload/js/plupload.flash.swf",silverlight_xap_url:"plupload/js/plupload.silverlight.xap",filters:[{title:"Image files",extensions:"jpg,gif,png,jpeg,bmp"}]});a.init(),$("#add-item").click(function(){$("#browser-file").trigger("click")}),a.bind("FilesAdded",function(){a.start()}),a.bind("UploadProgress",function(t,a){e.find("span").hide(),e.find(".uploading-msg").html("Uploading... "+a.percent+"%"),console.log(a.percent)}),a.bind("FileUploaded",function(a,i,r){if(e.find("span").show(),e.find(".uploading-msg").html(""),console.log(r),200==r.status){var n=r.response;n=JSON.parse(n),filename=n.result.filename;var o='<div class="thumb-del"><span class="label label-warning" onclick="ProductJS.slideDeleteItem(this)">Xóa</span></div>';t.prepend('<div class="thumb"><img src="../../../temp/'+filename+'"><input type="hidden" name="pro_slide[]" value="'+filename+'">'+o+"</div>")}})},ProductJS.slideDeleteItem=function(e){$(e).closest(".thumb").remove()},ProductJS.search_relate=function(){data=$("#search_pro_relate").val(),$.ajax({type:"post",url:"../products/ajax.php",data:{keyword:data,action:"search_relate"},success:function(e){$("#relate_pro_result").html(e)}})},ProductJS.add_relate=function(){var e=[];if($(".pro_relate_result").each(function(){"checked"==$(this).attr("checked")&&(dataRN={value:$(this).val(),title:$(this).attr("title")},e.push(dataRN))}),e.length){var t='<div class="relate_element">',a=!0;for(i in e)if(!$("#pro_relate_list_"+e[i].value).length){var r="";r+='<label class="checkbox"><input type="checkbox" class="checkbox" checked="checked" name="pro_relate_list[]" value="'+e[i].value+'" id="pro_relate_list_'+e[i].value+'"/>',r+=e[i].title,r+='<span style="margin-left:5px;padding:5px;color:red;font-weight:bold;font-size:14px;cursor:pointer;" onclick="ProductJS.del_relate(this);return false;">&times;</span></label>',t+=r,a=!1}t+="</div>",a||$("#pro_relate_after_search").append(t)}},ProductJS.del_relate=function(e){relateDiv=$(e).closest(".relate_element"),$(e).closest("label").remove(),relateDiv.find("label").length||relateDiv.remove()};var TemplateJS=TemplateJS||{};TemplateJS.disableTemplateListFile=function(){$("#tpl_css_file, #tpl_js_file").attr("disabled","disabled")};var trigger_oninput=!1;$(document).on("change","input,textarea,select",function(){trigger_oninput=!0}),$(window).on("load",function(){trigger_oninput&&alert(1)}),$(document).ready(function(){$('input[js-autocomplete="1"]').length&&$('input[js-autocomplete="1"]').autocomplete({serviceUrl:"../../resources/php/autocomplete.php"}),$(".select-cat-multi").find("[data-target]").change(function(){var e=$(this).data("target"),t=$(this).val(),a=$(this).data("table"),i=$(this).data("id-field"),r=$(this).data("name-field"),n=$(this).data("parent-field");return t?void $.ajax({type:"post",url:"/ajax/getDropdownCatChild",data:{record_id:t,table:a,id_field:i,name_field:r,parent_field:n},success:function(t){t&&$("#"+e).html(t).removeAttr("disabled")}}):!1}),$('[data-auto-form-name="select-multi-relate"]').find("[data-target]").change(function(){var e=$(this).data("target"),t=$(this).val();return t?void $.ajax({type:"post",url:"/ajax/"+$(this).data("action"),data:{data:t},success:function(t){t&&$("#"+e).html(t).removeAttr("disabled")}}):!1}),$('[data-role="auto-numeric"]').length&&$('[data-role="auto-numeric"]').autoNumeric("init",{mDec:0,lZero:"deny"}),$('input[datepick-element="1"]').length&&$('input[datepick-element="1"]').datepicker({format:"dd/mm/yyyy"}),$('input[data-unique="1"]').length&&$('input[data-unique="1"]').blur(function(){var e=$(this);e.val()&&$.ajax({type:"post",url:"/ajax/checkUnique",data:{table:e.data("unique-table"),field:e.data("unique-field"),value:e.val()},dataType:"json",success:function(t){t||alert(1),1==t.unique?(submit_available=!1,e.closest(".form-group").find(".alert-unique-input").show()):(submit_available=!0,e.closest(".form-group").find(".alert-unique-input").hide())}})}),ProductJS.uploadSlide(),$("#add-combo").click(function(){var e=$("#combo_id"),t=e.find('option[value="'+e.val()+'"]'),a='<label class="checkbox"><input type="checkbox" value="'+e.val()+'" name="comboDevide[]" id="comboDevide_'+e.val()+'">'+t.html()+'<span style="margin-left:5px;padding:5px;color:red;font-weight:bold;font-size:14px;cursor:pointer;" class="removeRow">×</span></label>';$("#comboDevide_"+e.val()).length||$("#list-combo").append(a)}),$(document).on("click",".removeRow",function(){$(this).parent().remove()})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(e){return l.raw?e:encodeURIComponent(e)}function a(e){return l.raw?e:decodeURIComponent(e)}function i(e){return t(l.json?JSON.stringify(e):String(e))}function r(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(o," ")),l.json?JSON.parse(e):e}catch(t){}}function n(t,a){var i=l.raw?t:r(t);return e.isFunction(a)?a(i):i}var o=/\+/g,l=e.cookie=function(r,o,s){if(void 0!==o&&!e.isFunction(o)){if(s=e.extend({},l.defaults,s),"number"==typeof s.expires){var c=s.expires,d=s.expires=new Date;d.setTime(+d+864e5*c)}return document.cookie=[t(r),"=",i(o),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}for(var u=r?void 0:{},p=document.cookie?document.cookie.split("; "):[],f=0,m=p.length;m>f;f++){var h=p[f].split("="),v=a(h.shift()),g=h.join("=");if(r&&r===v){u=n(g,o);break}r||void 0===(g=n(g))||(u[v]=g)}return u};l.defaults={},e.removeCookie=function(t,a){return void 0===e.cookie(t)?!1:(e.cookie(t,"",e.extend({},a,{expires:-1})),!e.cookie(t))}}),$.fn.removeAttributes=function(e,t){return e&&(e=$.map(e,function(e){return e.toString().toLowerCase()})),t&&(t=$.map(t,function(e){return e.toString().toLowerCase()}),e&&(e=$.grep(e,function(e){return-1==$.inArray(e,t)}))),this.each(function(){var a;e?a=e:(a=$.map(this.attributes,function(e){return e.name.toString().toLowerCase()}),t&&(a=$.grep(a,function(e){return-1==$.inArray(e,t)})));var i=$(this);$.each(a,function(e,t){i.removeAttr(t)})})};