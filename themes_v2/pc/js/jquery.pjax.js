!function(t){function e(e,r,n){var o=this;return this.on("click.pjax",e,function(e){var i=t.extend({},d(r,n));i.container||(i.container=t(this).attr("data-pjax")||o),a(e,i)})}function a(e,a,r){r=d(a,r);var o=e.currentTarget;if("A"!==o.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||location.protocol!==o.protocol||location.hostname!==o.hostname||o.hash&&o.href.replace(o.hash,"")===location.href.replace(location.hash,"")||o.href===location.href+"#"||e.isDefaultPrevented())){var i={url:o.href,container:t(o).attr("data-pjax"),pjaxParam:t(o).attr("data-pjax-params"),hasScroll:t(o).attr("data-pjax-scroll"),appendContent:t(o).attr("data-pjax-append"),target:o},s=t.extend({},i,r),c=t.Event("pjax:click");t(o).trigger(c,[s]),c.isDefaultPrevented()||(n(s),e.preventDefault(),t(o).trigger("pjax:clicked",[s]))}}function r(e,a,r){r=d(a,r);var o=e.currentTarget;if("FORM"!==o.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var i={type:o.method.toUpperCase(),url:o.action,container:t(o).attr("data-pjax"),target:o};if("GET"!==i.type&&void 0!==window.FormData)i.data=new FormData(o),i.processData=!1,i.contentType=!1;else{if(t(o).find(":file").length)return;i.data=t(o).serializeArray()}n(t.extend({},i,r)),e.preventDefault()}function n(e){function a(e,a,n){n||(n={}),n.relatedTarget=r;var o=t.Event(e,n);return s.trigger(o,a),!o.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,n.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var r=e.target,o=u(e.url).hash,s=e.context=f(e.container);e.data||(e.data={}),e.data._pjax=s.selector,e.data._params=e.pjaxParam;var c;e.beforeSend=function(t,r){return"GET"!==r.type&&(r.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",s.selector),a("pjax:beforeSend",[t,r])?(r.timeout>0&&(c=setTimeout(function(){a("pjax:timeout",[t,e])&&t.abort("timeout")},r.timeout),r.timeout=0),void(e.requestUrl=u(r.url).href)):!1},e.complete=function(t,r){c&&clearTimeout(c),a("pjax:complete",[t,r,e]),a("pjax:end",[t,e])},e.error=function(t,r,n){var o=x("",t,e),s=a("pjax:error",[t,r,n,e]);"GET"==e.type&&"abort"!==r&&s&&i(o.url)},e.success=function(r,c,p){var d=n.state,f="function"==typeof t.pjax.defaults.version?t.pjax.defaults.version():t.pjax.defaults.version,h=p.getResponseHeader("X-PJAX-Version"),m=x(r,p,e);if(f&&h&&f!==h)return void i(m.url);if(!m.contents)return void i(m.url);n.state={id:e.id||l(),url:m.url,title:m.title,container:s.selector,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(n.state,m.title,m.url);try{document.activeElement.blur()}catch(j){}m.title&&(document.title=m.title),a("pjax:beforeReplace",[m.contents,e],{state:n.state,previousState:d}),"undefined"!=typeof e.appendContent&&e.appendContent?s.append(m.contents):s.html(m.contents),t("#overlay").hide(),addMapper();var g=s.find("input[autofocus], textarea[autofocus]").last()[0];if(g&&document.activeElement!==g&&g.focus(),v(m.scripts),("undefined"==typeof e.hasScroll||"true"==e.hasScroll)&&"number"==typeof e.scrollTo&&t(window).scrollTop(e.scrollTo),""!==o){var w=u(m.url);w.hash=o,n.state.url=w.href,window.history.replaceState(n.state,m.title,w.href);var y=t(w.hash);y.length&&t(window).scrollTop(y.offset().top)}a("pjax:success",[r,c,p,e])},n.state||(n.state={id:l(),url:window.location.href,title:document.title,container:s.selector,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(n.state,document.title));var d=n.xhr;d&&d.readyState<4&&(d.onreadystatechange=t.noop,d.abort()),n.options=e;var d=n.xhr=t.ajax(e);return d.readyState>0&&(e.push&&!e.replace&&(j(n.state.id,s.clone().contents()),window.history.pushState(null,"",p(e.requestUrl))),a("pjax:start",[d,e]),a("pjax:send",[d,e])),n.xhr}function o(e,a){var r={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return n(t.extend(r,d(e,a)))}function i(t){window.history.replaceState(null,"","#"),window.location.replace(t)}function s(e){var a=n.state,r=e.state;if(r&&r.container){if(S&&E==r.url)return;if(n.state&&n.state.id===r.id)return;var o=t(r.container);if(o.length){var s,c=C[r.id];n.state&&(s=n.state.id<r.id?"forward":"back",g(s,n.state.id,o.clone().contents()));var l=t.Event("pjax:popstate",{state:r,direction:s});o.trigger(l);var p={id:r.id,url:r.url,container:o,push:!1,fragment:r.fragment,timeout:r.timeout,scrollTo:!1};if(c){o.trigger("pjax:start",[null,p]),n.state=r,r.title&&(document.title=r.title);var u=t.Event("pjax:beforeReplace",{state:r,previousState:a});o.trigger(u,[c,p]),o.html(c),o.trigger("pjax:end",[null,p])}else n(p);o[0].offsetHeight}else i(location.href)}S=!1}function c(e){var a=t.isFunction(e.url)?e.url():e.url,r=e.type?e.type.toUpperCase():"GET",n=t("<form>",{method:"GET"===r?"GET":"POST",action:a,style:"display:none"});"GET"!==r&&"POST"!==r&&n.append(t("<input>",{type:"hidden",name:"_method",value:r.toLowerCase()}));var o=e.data;if("string"==typeof o)t.each(o.split("&"),function(e,a){var r=a.split("=");n.append(t("<input>",{type:"hidden",name:r[0],value:r[1]}))});else if("object"==typeof o)for(key in o)n.append(t("<input>",{type:"hidden",name:key,value:o[key]}));t(document.body).append(n),n.submit()}function l(){return(new Date).getTime()}function p(t){return t.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"").replace(/\?_params=[^&]+&?/,"?").replace(/_params=[^&]+&?/,"").replace(/[\?&]$/,"")}function u(t){var e=document.createElement("a");return e.href=t,e}function d(e,a){return e&&a?a.container=e:a=t.isPlainObject(e)?e:{container:e},a.container&&(a.container=f(a.container)),a}function f(e){if(e=t(e),e.length){if(""!==e.selector&&e.context===document)return e;if(e.attr("id"))return t("#"+e.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+e.selector}function h(t,e){return t.filter(e).add(t.find(e))}function m(e){return t.parseHTML(e,document,!0)}function x(e,a,r){var n={};if(n.url=p(a.getResponseHeader("X-PJAX-URL")||r.requestUrl),/<html/i.test(e))var o=t(m(e.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),i=t(m(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else var o=i=t(m(e));if(0===i.length)return n;if(n.title=h(o,"title").last().text(),r.fragment){if("body"===r.fragment)var s=i;else var s=h(i,r.fragment).first();s.length&&(n.contents=s.contents(),n.title||(n.title=s.attr("title")||s.data("title")))}else/<html/i.test(e)||(n.contents=i);return n.contents&&(n.contents=n.contents.not(function(){return t(this).is("title")}),n.contents.find("title").remove(),n.scripts=h(n.contents,"script[src]").remove(),n.contents=n.contents.not(n.scripts)),n.title&&(n.title=t.trim(n.title)),n}function v(e){if(e){var a=t("script[src]");e.each(function(){var e=this.src,r=a.filter(function(){return this.src===e});if(!r.length){var n=document.createElement("script"),o=t(this).attr("type");o&&(n.type=o),n.src=t(this).attr("src"),document.head.appendChild(n)}})}}function j(t,e){C[t]=e,A.push(t),w(k,0),w(A,n.defaults.maxCacheLength)}function g(t,e,a){var r,o;C[e]=a,"forward"===t?(r=A,o=k):(r=k,o=A),r.push(e),(e=o.pop())&&delete C[e],w(r,n.defaults.maxCacheLength)}function w(t,e){for(;t.length>e;)delete C[t.shift()]}function y(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&"X-PJAX-VERSION"===e.toUpperCase()}).attr("content")}function b(){t.fn.pjax=e,t.pjax=n,t.pjax.enable=t.noop,t.pjax.disable=T,t.pjax.click=a,t.pjax.submit=r,t.pjax.reload=o,t.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:y},t(window).on("popstate.pjax",s)}function T(){t.fn.pjax=function(){return this},t.pjax=c,t.pjax.enable=b,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).off("popstate.pjax",s)}var S=!0,E=window.location.href,P=window.history.state;P&&P.container&&(n.state=P),"state"in window.history&&(S=!1);var C={},k=[],A=[];t.inArray("state",t.event.props)<0&&t.event.props.push("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),t.support.pjax?b():T()}(jQuery);